import{h as se}from"./BLMuvzoS.js";import{b as a,I as Je,g as Ge,B as Ke,r as c,j as oe,D as ne,k as Qe,E as Xe,c as h,a as r,w as l,d as n,n as m,F as Q,A as f,m as g,o as p,t as w,Q as re,C as Ye,y as X,x as C,p as q,s as Ze,P as et,v as ie,l as tt,_ as at}from"#entry";import{s as lt}from"./BzLCLO6P.js";import{D as st}from"./CoiHVIeb.js";import{U as ot}from"./BnoVSOQD.js";import{C as nt}from"./DdFW8pdL.js";import{G as rt}from"./DzUz1rp7.js";import{T as xe}from"./1nlWnoXy.js";import{L as it}from"./BAlS7_RU.js";var ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"};function he(P){for(var x=1;x<arguments.length;x++){var $=arguments[x]!=null?Object(arguments[x]):{},L=Object.keys($);typeof Object.getOwnPropertySymbols=="function"&&(L=L.concat(Object.getOwnPropertySymbols($).filter(function(B){return Object.getOwnPropertyDescriptor($,B).enumerable}))),L.forEach(function(B){dt(P,B,$[B])})}return P}function dt(P,x,$){return x in P?Object.defineProperty(P,x,{value:$,enumerable:!0,configurable:!0,writable:!0}):P[x]=$,P}var ue=function(x,$){var L=he({},x,$.attrs);return a(Je,he({},L,{icon:ut}),null)};ue.displayName="DashboardOutlined";ue.inheritAttrs=!1;const ct={class:"proxy-page fade-in"},pt={class:"stat-card enhanced-card gradient-bg-blue slide-in-up",style:{"animation-delay":"0s"}},vt={class:"stat-icon"},ft={class:"stat-content"},mt={class:"stat-main"},yt={class:"stat-value"},_t={class:"stat-card enhanced-card gradient-bg-green slide-in-up",style:{"animation-delay":"0.1s"}},gt={class:"stat-icon"},wt={class:"stat-content"},kt={class:"stat-main"},bt={class:"stat-value"},xt={class:"stat-card enhanced-card gradient-bg-orange slide-in-up",style:{"animation-delay":"0.2s"}},ht={class:"stat-icon"},Ct={class:"stat-content"},$t={class:"stat-main"},It={class:"stat-value"},Ot={class:"stat-card enhanced-card control-card slide-in-up",style:{"animation-delay":"0.3s"}},St={class:"control-content"},Tt={class:"control-item"},Ut={class:"control-item"},Pt={class:"control-item",style:{"font-size":"11px"}},zt={class:"control-time"},Lt={class:"table-container enhanced-card scale-in"},Nt={class:"table-header"},At={class:"table-title"},Mt={class:"search-filters-container"},Rt={key:2,class:"ip-code"},Dt={key:4,class:"country-info"},Et={class:"country-flag"},Bt={class:"country-name"},Ht={class:"address-text"},Vt={key:0,class:"auth-code"},Ft={key:1,class:"unknown-text"},jt={key:0,class:"auth-code"},Wt={key:1,class:"unknown-text"},qt={key:10,class:"time-text"},Jt={key:11,class:"time-text"},Gt={key:0},Kt={class:"subscription-modal-content"},Qt={class:"radio-content"},Xt={class:"radio-title"},Yt={class:"radio-content"},Zt={class:"radio-title"},ea={class:"subscription-options"},ta=Ge({__name:"index",setup(P){const{$http:x}=Ke(),$=c([]),L=c(0),B=c(0),de=c(0),V=c(!0),ce=c(""),pe=c(!1),O=c(""),N=c(""),A=c(""),M=c(""),S=c(""),R=c(""),D=c(""),F=c(10),ve=c([]),j=c(!1),Y=c(!1),u=c({fetcher_name:"手动添加",protocol:"",ip:"",port:null,username:"",password:"",country:"",address:""}),W=c(!1),Z=c(!1),fe=c(""),J=c("temporary"),ee=c(!0),te=c(!0),ae=c(""),z=c({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"],showTotal:t=>`共 ${t} 条`,size:"small",onChange:(t,e)=>{z.value.current=t,z.value.pageSize=e},onShowSizeChange:(t,e)=>{z.value.current=1,z.value.pageSize=e}});let T=null;const Ce=t=>{if(!t&&t!==0)return"-";const e=Math.floor(t/86400),o=Math.floor(t%86400/3600),d=Math.floor(t%3600/60),E=t%60;return e>0?`${e}天${o}时`:o>0?`${o}时${d}分`:d>0?`${d}分${E}秒`:`${E}秒`},$e=t=>({http:"blue",https:"green",socks4:"orange",socks5:"purple"})[t]||"default",Ie=t=>t<1e3?"success":t<2e3?"processing":t<4e3?"warning":"error",Oe=oe(()=>{let t=$.value;if(O.value&&(t=t.filter(e=>e.protocol.toLowerCase()===O.value.toLowerCase())),N.value){const e=N.value.toLowerCase();t=t.filter(o=>o.ip.toLowerCase().includes(e))}if(A.value){const e=A.value;t=t.filter(o=>o.port.toString().includes(e))}if(M.value){const e=M.value.toLowerCase();t=t.filter(o=>o.fetcher_name.toLowerCase().includes(e))}if(S.value&&(t=t.filter(e=>e.country===S.value)),R.value){const e=R.value.trim();if(e.startsWith("<")){const o=parseInt(e.substring(1));isNaN(o)||(t=t.filter(d=>d.latency<o))}else if(e.startsWith(">")){const o=parseInt(e.substring(1));isNaN(o)||(t=t.filter(d=>d.latency>o))}else{const o=parseInt(e);isNaN(o)||(t=t.filter(d=>d.latency<=o))}}if(D.value){const e=D.value.trim();if(e.startsWith(">")){const o=parseInt(e.substring(1));isNaN(o)||(t=t.filter(d=>d.alive_time>o))}else if(e.startsWith("<")){const o=parseInt(e.substring(1));isNaN(o)||(t=t.filter(d=>d.alive_time<o))}else{const o=parseInt(e);isNaN(o)||(t=t.filter(d=>d.alive_time>=o))}}return z.value.total=t.length,t}),Se=t=>({中国:"🇨🇳",美国:"🇺🇸",日本:"🇯🇵",韩国:"🇰🇷",新加坡:"🇸🇬",香港:"🇭🇰",台湾:"🇹🇼",德国:"🇩🇪",英国:"🇬🇧",法国:"🇫🇷",加拿大:"🇨🇦",澳大利亚:"🇦🇺",俄罗斯:"🇷🇺",印度:"🇮🇳",巴西:"🇧🇷",本地:"🏠",未知:"🌍"})[t]||"🌍",Te=(t,e)=>e.value.toLowerCase().includes(t.toLowerCase()),Ue=(t,e)=>e.value.toLowerCase().includes(t.toLowerCase()),me=async t=>{try{return await navigator.clipboard.writeText(t),!0}catch{const o=document.createElement("textarea");o.value=t,o.style.position="fixed",o.style.opacity="0",document.body.appendChild(o),o.select();try{return document.execCommand("copy"),document.body.removeChild(o),!0}catch{return document.body.removeChild(o),!1}}},Pe=async t=>{let e="";t.username&&t.password?e=`${t.protocol}://${t.username}:${t.password}@${t.ip}:${t.port}`:e=`${t.protocol}://${t.ip}:${t.port}`,await me(e)?f.success("代理地址已复制到剪贴板"):f.error("复制失败，请手动复制")},ze=async t=>{let e="";const d=`${t.country||"未知"}_${t.ip}`,E=encodeURIComponent(d);if(t.username&&t.password){const H=`${t.username}:${t.password}`;e=`socks://${btoa(H)}@${t.ip}:${t.port}#${E}`}else e=`socks://${t.ip}:${t.port}#${E}`;await me(e)?f.success("V2Ray节点已复制到剪贴板"):f.error("复制失败，请手动复制")},ye=oe(()=>!!(O.value||N.value||A.value||M.value||S.value||R.value||D.value)),Le=oe(()=>{let t=0;return O.value&&t++,N.value&&t++,A.value&&t++,M.value&&t++,S.value&&t++,R.value&&t++,D.value&&t++,t}),Ne=()=>{O.value="",N.value="",A.value="",M.value="",S.value="",R.value="",D.value="",z.value.current=1},Ae=()=>{j.value=!0},_e=()=>{j.value=!1,u.value={fetcher_name:"手动添加",protocol:"",ip:"",port:null,username:"",password:"",country:"",address:""}},ge=t=>{ae.value=t,fe.value=`生成 ${t.toUpperCase()} 订阅链接`,J.value="temporary",W.value=!0},Me=async()=>{try{Z.value=!0;const t=localStorage.getItem("token");if(!t){f.error("请先登录");return}const e=J.value==="permanent",o=ae.value,d={};ee.value||S.value&&(d.c=S.value.toUpperCase()),te.value||O.value&&(d.protocol=O.value);const H=`${tt().public.apiBase}/generate_subscription_links`;console.log("请求URL:",H),console.log("请求参数:",{type:o,permanent:e,params:d}),console.log("Token:",t?"已获取":"未获取");let i=0;const U=3;let y;for(;i<U;)try{y=await fetch(H,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({type:o,permanent:e,params:d})}),console.log(`第${i+1}次请求响应状态:`,y.status),console.log("响应头:",y.headers);const _=y.headers.get("content-type");if(!_||!_.includes("application/json")){const k=await y.text();if(console.error(`第${i+1}次请求返回非JSON响应:`,k),i<U-1){i++,console.log(`等待1秒后重试... (${i}/${U})`),await new Promise(b=>setTimeout(b,1e3));continue}else{f.error("API服务器返回了非JSON响应，请检查服务器状态");return}}break}catch(_){if(console.error(`第${i+1}次请求失败:`,_),i<U-1){i++,console.log(`等待1秒后重试... (${i}/${U})`),await new Promise(k=>setTimeout(k,1e3));continue}else throw _}if(!y){f.error("无法连接到API服务器，请检查服务器状态");return}if(!y.ok){const _=await y.text();console.error("API错误响应:",_),f.error(`API请求失败: ${y.status} ${y.statusText}`);return}const I=await y.json();if(console.log("API响应数据:",I),I.success){const _=I.links[o];if(_){if(navigator.clipboard&&window.isSecureContext){await navigator.clipboard.writeText(_);const k=e?"永久":"临时";f.success(`${o.toUpperCase()} ${k}订阅链接已复制到剪贴板！`)}else{const k=document.createElement("textarea");k.value=_,k.style.position="fixed",k.style.left="-999999px",document.body.appendChild(k),k.select();try{document.execCommand("copy");const b=e?"永久":"临时";f.success(`${o.toUpperCase()} ${b}订阅链接已复制到剪贴板！`)}catch(b){f.error("复制失败，请手动复制："+_),console.error("复制失败:",b)}document.body.removeChild(k)}W.value=!1}else f.error("生成订阅链接失败：未返回链接")}else f.error(I.message||"生成订阅链接失败")}catch(t){console.error("生成订阅链接失败:",t),f.error("生成订阅链接失败，请稍后重试")}finally{Z.value=!1}},Re=()=>{W.value=!1,ae.value=""},De=async()=>{if(!u.value.fetcher_name){f.error("请输入来源");return}if(!u.value.protocol){f.error("请选择协议");return}if(!u.value.ip){f.error("请输入IP地址");return}if(!u.value.port){f.error("请输入端口");return}if(!/^(\d{1,3}\.){3}\d{1,3}$/.test(u.value.ip)){f.error("IP地址格式不正确");return}Y.value=!0;try{const e={fetcher_name:u.value.fetcher_name,protocol:u.value.protocol,ip:u.value.ip,port:u.value.port};u.value.username&&(e.username=u.value.username),u.value.password&&(e.password=u.value.password),u.value.country&&(e.country=u.value.country),u.value.address&&(e.address=u.value.address),await x.post("/add_proxy",e),f.success("代理添加成功"),j.value=!1,_e(),await le()}catch(e){console.error("添加代理失败:",e),f.error(e.message||"添加代理失败")}finally{Y.value=!1}},Ee=[{title:"来源",dataIndex:"fetcher_name",key:"fetcher_name",width:140},{title:"协议",dataIndex:"protocol",key:"protocol",width:80},{title:"IP地址",dataIndex:"ip",key:"ip",width:130},{title:"端口",dataIndex:"port",key:"port",width:70},{title:"国家",dataIndex:"country",key:"country",width:110},{title:"地址",dataIndex:"address",key:"address",width:180},{title:"账号",dataIndex:"username",key:"username",width:90},{title:"密码",dataIndex:"password",key:"password",width:90},{title:"延迟",dataIndex:"latency",key:"latency",width:90,sorter:(t,e)=>t.latency-e.latency},{title:"存活",dataIndex:"alive_time",key:"alive_time",width:100,sorter:(t,e)=>t.alive_time-e.alive_time},{title:"上次验证",dataIndex:"validate_date",key:"validate_date",width:120},{dataIndex:"to_validate_date",key:"to_validate_date",width:120},{title:"操作",key:"action",width:160,fixed:"right"}],le=async()=>{pe.value=!0;try{const t=await x.get("/proxies_status",{limit:500});$.value=t.proxies,L.value=t.sum_proxies_cnt,B.value=t.validated_proxies_cnt,de.value=t.pending_proxies_cnt,ce.value=se().format("HH:mm:ss");const e=new Set;t.proxies.forEach(o=>{o.fetcher_name&&e.add(o.fetcher_name)}),ve.value=Array.from(e).sort()}catch(t){t.code==="ECONNABORTED"?f.warning("请求超时，后端处理时间过长，请稍后再试"):t.code==="ERR_NETWORK"?f.error("无法连接到后端服务，请检查服务是否启动"):t.response?.status===401||f.error(t.message||"获取代理数据失败"),console.error("更新数据失败:",t)}finally{pe.value=!1}};ne([O,N,A,M,S,R,D],()=>{z.value.current=1});const Be=t=>{console.log("分页变化:",t)},G=()=>{if(T&&(clearInterval(T),T=null),V.value){const t=F.value*1e3;console.log("启动自动刷新定时器，间隔:",F.value,"秒"),T=lt(()=>{console.log("自动刷新触发"),le()},t)}},He=t=>{t&&(console.log("刷新间隔改变为:",t,"秒"),G())};return ne(V,t=>{console.log("自动刷新开关:",t),t?G():T&&(clearInterval(T),T=null)}),ne(F,t=>{console.log("检测到间隔变化:",t,"秒"),V.value&&G()}),Qe(()=>{G(),le()}),Xe(()=>{T&&(clearInterval(T),T=null)}),(t,e)=>{const o=g("a-tooltip"),d=g("a-col"),E=g("a-switch"),K=g("a-input-number"),H=g("a-row"),i=g("a-select-option"),U=g("a-select"),y=g("a-input"),I=g("a-button"),_=g("a-tag"),k=g("a-space"),b=g("a-form-item"),Ve=g("a-input-password"),Fe=g("a-form"),we=g("a-modal"),je=g("a-table"),ke=g("a-radio"),We=g("a-radio-group"),be=g("a-checkbox");return p(),h(Q,null,[r("div",ct,[a(H,{gutter:[16,16],class:"stats-row"},{default:l(()=>[a(d,{xs:24,sm:12,md:6},{default:l(()=>[r("div",pt,[r("div",vt,[a(m(st))]),r("div",ft,[r("div",mt,[e[25]||(e[25]=r("div",{class:"stat-label"},"全部代理数量",-1)),r("div",yt,w(L.value.toLocaleString()),1)]),a(o,{title:"目前数据库中的代理总数，包含没有通过验证的代理"},{default:l(()=>[a(m(re),{class:"stat-help"})]),_:1})])])]),_:1}),a(d,{xs:24,sm:12,md:6},{default:l(()=>[r("div",_t,[r("div",gt,[a(m(Ye))]),r("div",wt,[r("div",kt,[e[26]||(e[26]=r("div",{class:"stat-label"},"当前可用代理",-1)),r("div",bt,w(B.value.toLocaleString()),1)])])])]),_:1}),a(d,{xs:24,sm:12,md:6},{default:l(()=>[r("div",xt,[r("div",ht,[a(m(X))]),r("div",Ct,[r("div",$t,[e[27]||(e[27]=r("div",{class:"stat-label"},"等待验证",-1)),r("div",It,w(de.value.toLocaleString()),1)]),a(o,null,{title:l(()=>[...e[28]||(e[28]=[n(" 表示这些代理的下次验证时间已经到了，但还没有完成验证 ",-1)])]),default:l(()=>[a(m(re),{class:"stat-help"})]),_:1})])])]),_:1}),a(d,{xs:24,sm:12,md:6},{default:l(()=>[r("div",Ot,[r("div",St,[r("div",Tt,[e[29]||(e[29]=r("span",{class:"control-label"},"自动刷新",-1)),a(E,{checked:V.value,"onUpdate:checked":e[0]||(e[0]=s=>V.value=s),size:"small"},null,8,["checked"])]),r("div",Ut,[e[30]||(e[30]=r("span",{class:"control-label"},"间隔(秒)",-1)),a(K,{value:F.value,"onUpdate:value":e[1]||(e[1]=s=>F.value=s),min:5,max:300,step:5,size:"small",style:{width:"80px"},onChange:He},null,8,["value"])]),r("div",Pt,[a(m(X),{style:{"margin-right":"4px"}}),r("span",zt,w(ce.value),1)])])])]),_:1})]),_:1}),r("div",Lt,[r("div",Nt,[r("h2",At,[a(m(ot)),e[31]||(e[31]=n(" 可用代理列表 ",-1))])]),r("div",Mt,[a(k,{size:10,wrap:"",class:"filter-space"},{default:l(()=>[a(U,{value:S.value,"onUpdate:value":e[2]||(e[2]=s=>S.value=s),placeholder:"🌍 国家/地区",style:{width:"140px"},size:"small","allow-clear":"","show-search":"","filter-option":Ue,class:"filter-select"},{default:l(()=>[a(i,{value:""},{default:l(()=>[...e[32]||(e[32]=[n("全部国家",-1)])]),_:1}),a(i,{value:"中国"},{default:l(()=>[...e[33]||(e[33]=[n("🇨🇳 中国",-1)])]),_:1}),a(i,{value:"美国"},{default:l(()=>[...e[34]||(e[34]=[n("🇺🇸 美国",-1)])]),_:1}),a(i,{value:"日本"},{default:l(()=>[...e[35]||(e[35]=[n("🇯🇵 日本",-1)])]),_:1}),a(i,{value:"韩国"},{default:l(()=>[...e[36]||(e[36]=[n("🇰🇷 韩国",-1)])]),_:1}),a(i,{value:"新加坡"},{default:l(()=>[...e[37]||(e[37]=[n("🇸🇬 新加坡",-1)])]),_:1}),a(i,{value:"香港"},{default:l(()=>[...e[38]||(e[38]=[n("🇭🇰 香港",-1)])]),_:1}),a(i,{value:"台湾"},{default:l(()=>[...e[39]||(e[39]=[n("🇹🇼 台湾",-1)])]),_:1}),a(i,{value:"德国"},{default:l(()=>[...e[40]||(e[40]=[n("🇩🇪 德国",-1)])]),_:1}),a(i,{value:"英国"},{default:l(()=>[...e[41]||(e[41]=[n("🇬🇧 英国",-1)])]),_:1}),a(i,{value:"法国"},{default:l(()=>[...e[42]||(e[42]=[n("🇫🇷 法国",-1)])]),_:1}),a(i,{value:"加拿大"},{default:l(()=>[...e[43]||(e[43]=[n("🇨🇦 加拿大",-1)])]),_:1}),a(i,{value:"本地"},{default:l(()=>[...e[44]||(e[44]=[n("🏠 本地",-1)])]),_:1}),a(i,{value:"未知"},{default:l(()=>[...e[45]||(e[45]=[n("🌐 未知",-1)])]),_:1})]),_:1},8,["value"]),a(U,{value:M.value,"onUpdate:value":e[3]||(e[3]=s=>M.value=s),placeholder:"📡 来源",style:{width:"150px"},size:"small","allow-clear":"","show-search":"","filter-option":Te,class:"filter-select"},{default:l(()=>[a(i,{value:""},{default:l(()=>[...e[46]||(e[46]=[n("全部来源",-1)])]),_:1}),(p(!0),h(Q,null,Ze(ve.value,s=>(p(),C(i,{key:s,value:s},{default:l(()=>[n(w(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),a(U,{value:O.value,"onUpdate:value":e[4]||(e[4]=s=>O.value=s),placeholder:"🔌 协议类型",style:{width:"120px"},size:"small","allow-clear":"",class:"filter-select"},{default:l(()=>[a(i,{value:""},{default:l(()=>[...e[47]||(e[47]=[n("全部协议",-1)])]),_:1}),a(i,{value:"http"},{default:l(()=>[...e[48]||(e[48]=[n("HTTP",-1)])]),_:1}),a(i,{value:"https"},{default:l(()=>[...e[49]||(e[49]=[n("HTTPS",-1)])]),_:1}),a(i,{value:"socks4"},{default:l(()=>[...e[50]||(e[50]=[n("SOCKS4",-1)])]),_:1}),a(i,{value:"socks5"},{default:l(()=>[...e[51]||(e[51]=[n("SOCKS5",-1)])]),_:1})]),_:1},8,["value"]),a(y,{value:N.value,"onUpdate:value":e[5]||(e[5]=s=>N.value=s),placeholder:"🔍 搜索 IP",style:{width:"140px"},size:"small","allow-clear":"",class:"filter-input"},null,8,["value"]),a(y,{value:A.value,"onUpdate:value":e[6]||(e[6]=s=>A.value=s),placeholder:"🔢 端口",style:{width:"100px"},size:"small","allow-clear":"",class:"filter-input"},null,8,["value"]),a(y,{value:R.value,"onUpdate:value":e[7]||(e[7]=s=>R.value=s),placeholder:"⚡ 延迟 如<1000",style:{width:"130px"},size:"small","allow-clear":"",class:"filter-input"},null,8,["value"]),a(y,{value:D.value,"onUpdate:value":e[8]||(e[8]=s=>D.value=s),placeholder:"⏱️ 存活 如>3600",style:{width:"130px"},size:"small","allow-clear":"",class:"filter-input"},null,8,["value"]),a(I,{type:"primary",size:"small",onClick:Ae,class:"add-btn"},{default:l(()=>[a(m(et)),e[52]||(e[52]=n(" 新增代理 ",-1))]),_:1}),a(I,{type:"default",size:"small",onClick:e[9]||(e[9]=s=>ge("clash")),class:"clash-btn"},{default:l(()=>[a(m(ie)),e[53]||(e[53]=n(" Clash 订阅 ",-1))]),_:1}),a(I,{type:"default",size:"small",onClick:e[10]||(e[10]=s=>ge("v2ray")),class:"v2ray-btn"},{default:l(()=>[a(m(ie)),e[54]||(e[54]=n(" V2Ray 订阅 ",-1))]),_:1}),ye.value?(p(),C(I,{key:0,type:"primary",size:"small",danger:"",onClick:Ne,class:"clear-btn"},{default:l(()=>[a(m(nt)),e[55]||(e[55]=n(" 清空 ",-1))]),_:1})):q("",!0),ye.value?(p(),C(_,{key:1,color:"blue",class:"active-tag"},{default:l(()=>[n(w(Le.value)+" 个筛选 ",1)]),_:1})):q("",!0)]),_:1})]),a(we,{open:j.value,"onUpdate:open":e[19]||(e[19]=s=>j.value=s),title:"新增代理",width:"600px",onOk:De,onCancel:_e,confirmLoading:Y.value},{default:l(()=>[a(Fe,{model:u.value,"label-col":{span:6},"wrapper-col":{span:18},class:"add-proxy-form"},{default:l(()=>[a(b,{label:"来源",required:""},{default:l(()=>[a(y,{value:u.value.fetcher_name,"onUpdate:value":e[11]||(e[11]=s=>u.value.fetcher_name=s),placeholder:"请输入来源，如: 手动添加","allow-clear":""},null,8,["value"])]),_:1}),a(b,{label:"协议",required:""},{default:l(()=>[a(U,{value:u.value.protocol,"onUpdate:value":e[12]||(e[12]=s=>u.value.protocol=s),placeholder:"请选择协议","allow-clear":""},{default:l(()=>[a(i,{value:"http"},{default:l(()=>[...e[56]||(e[56]=[n("HTTP",-1)])]),_:1}),a(i,{value:"https"},{default:l(()=>[...e[57]||(e[57]=[n("HTTPS",-1)])]),_:1}),a(i,{value:"socks4"},{default:l(()=>[...e[58]||(e[58]=[n("SOCKS4",-1)])]),_:1}),a(i,{value:"socks5"},{default:l(()=>[...e[59]||(e[59]=[n("SOCKS5",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),a(b,{label:"IP地址",required:""},{default:l(()=>[a(y,{value:u.value.ip,"onUpdate:value":e[13]||(e[13]=s=>u.value.ip=s),placeholder:"请输入IP地址，如: 127.0.0.1","allow-clear":""},null,8,["value"])]),_:1}),a(b,{label:"端口",required:""},{default:l(()=>[a(K,{value:u.value.port,"onUpdate:value":e[14]||(e[14]=s=>u.value.port=s),placeholder:"请输入端口",min:1,max:65535,style:{width:"100%"}},null,8,["value"])]),_:1}),a(b,{label:"账号"},{default:l(()=>[a(y,{value:u.value.username,"onUpdate:value":e[15]||(e[15]=s=>u.value.username=s),placeholder:"如需认证请输入账号","allow-clear":""},null,8,["value"])]),_:1}),a(b,{label:"密码"},{default:l(()=>[a(Ve,{value:u.value.password,"onUpdate:value":e[16]||(e[16]=s=>u.value.password=s),placeholder:"如需认证请输入密码","allow-clear":""},null,8,["value"])]),_:1}),a(b,{label:"国家"},{default:l(()=>[a(y,{value:u.value.country,"onUpdate:value":e[17]||(e[17]=s=>u.value.country=s),placeholder:"请输入国家，如: 中国","allow-clear":""},null,8,["value"])]),_:1}),a(b,{label:"地址"},{default:l(()=>[a(y,{value:u.value.address,"onUpdate:value":e[18]||(e[18]=s=>u.value.address=s),placeholder:"请输入详细地址，如: 北京","allow-clear":""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirmLoading"]),a(je,{columns:Ee,"data-source":Oe.value,"row-key":s=>`${s.protocol}://${s.ip}:${s.port}`,bordered:!1,loading:!1,pagination:z.value,"onUpdate:pagination":e[20]||(e[20]=s=>z.value=s),onChange:Be,scroll:{x:1200},class:"modern-table",size:"small"},{bodyCell:l(({column:s,record:v})=>[s.key==="fetcher_name"?(p(),C(_,{key:0,color:"purple"},{default:l(()=>[a(m(rt),{style:{"margin-right":"4px"}}),n(" "+w(v.fetcher_name),1)]),_:2},1024)):s.key==="protocol"?(p(),C(_,{key:1,color:$e(v.protocol)},{default:l(()=>[n(w(v.protocol.toUpperCase()),1)]),_:2},1032,["color"])):s.key==="ip"?(p(),h("code",Rt,w(v.ip),1)):s.key==="port"?(p(),C(_,{key:3,color:"default"},{default:l(()=>[n(w(v.port),1)]),_:2},1024)):s.key==="country"?(p(),h("div",Dt,[r("span",Et,w(Se(v.country||"未知")),1),r("span",Bt,w(v.country||"未知"),1)])):s.key==="address"?(p(),C(o,{key:5,title:v.address||"无"},{default:l(()=>[r("span",Ht,w(v.address||"-"),1)]),_:2},1032,["title"])):s.key==="username"?(p(),h(Q,{key:6},[v.username?(p(),h("code",Vt,w(v.username),1)):(p(),h("span",Ft,"未知"))],64)):s.key==="password"?(p(),h(Q,{key:7},[v.password?(p(),h("code",jt,w(v.password),1)):(p(),h("span",Wt,"未知"))],64)):s.key==="latency"?(p(),C(_,{key:8,color:Ie(v.latency),class:"latency-tag"},{default:l(()=>[v.latency<1e3?(p(),C(m(xe),{key:0})):(p(),C(m(ue),{key:1})),n(" "+w(v.latency)+"ms ",1)]),_:2},1032,["color"])):s.key==="alive_time"?(p(),C(_,{key:9,color:"cyan",class:"alive-tag"},{default:l(()=>[a(m(X)),n(" "+w(Ce(v.alive_time)),1)]),_:2},1024)):s.key==="validate_date"?(p(),h("span",qt,w(v.validate_date?m(se)(v.validate_date).format("MM-DD HH:mm:ss"):"-"),1)):s.key==="to_validate_date"?(p(),h("span",Jt,w(v.to_validate_date?m(se)(v.to_validate_date).format("MM-DD HH:mm:ss"):"-"),1)):s.key==="action"?(p(),C(k,{key:12,size:4},{default:l(()=>[a(o,{title:"复制代理地址"},{default:l(()=>[a(I,{type:"link",size:"small",onClick:qe=>Pe(v),style:{padding:"0 4px"}},{default:l(()=>[a(m(ie)),e[60]||(e[60]=n(" 代理 ",-1))]),_:1},8,["onClick"])]),_:2},1024),v.protocol==="socks4"||v.protocol==="socks5"?(p(),C(o,{key:0,title:"复制V2Ray节点"},{default:l(()=>[a(I,{type:"link",size:"small",onClick:qe=>ze(v),style:{padding:"0 4px"}},{default:l(()=>[a(m(it)),e[61]||(e[61]=n(" V2Ray ",-1))]),_:1},8,["onClick"])]),_:2},1024)):q("",!0)]),_:2},1024)):q("",!0)]),headerCell:l(({column:s})=>[s.key==="to_validate_date"?(p(),h("span",Gt,[e[63]||(e[63]=n(" 下次验证时间 ",-1)),a(o,null,{title:l(()=>[...e[62]||(e[62]=[n(" 验证器会不断从数据库中取出满足下次验证时间在当前时间之前的代理进行验证 ",-1)])]),default:l(()=>[a(m(re),{style:{"margin-left":"4px",opacity:"0.6"}})]),_:1})])):q("",!0)]),_:1},8,["data-source","row-key","pagination"])])]),a(we,{open:W.value,"onUpdate:open":e[24]||(e[24]=s=>W.value=s),title:fe.value,width:"500px",onOk:Me,onCancel:Re,confirmLoading:Z.value,okText:"生成订阅链接",cancelText:"取消"},{default:l(()=>[r("div",Kt,[a(We,{value:J.value,"onUpdate:value":e[21]||(e[21]=s=>J.value=s),class:"subscription-type-group"},{default:l(()=>[a(ke,{value:"temporary",class:"subscription-radio"},{default:l(()=>[r("div",Qt,[r("div",Xt,[a(m(X)),e[64]||(e[64]=n(" 临时链接 ",-1))]),e[65]||(e[65]=r("div",{class:"radio-desc"},"有效期1小时，适合临时测试使用",-1))])]),_:1}),a(ke,{value:"permanent",class:"subscription-radio"},{default:l(()=>[r("div",Yt,[r("div",Zt,[a(m(xe)),e[66]||(e[66]=n(" 永久链接 ",-1))]),e[67]||(e[67]=r("div",{class:"radio-desc"},"永久有效，适合长期使用（用户被删除后自动失效）",-1))])]),_:1})]),_:1},8,["value"]),r("div",ea,[a(be,{checked:ee.value,"onUpdate:checked":e[22]||(e[22]=s=>ee.value=s),class:"option-checkbox"},{default:l(()=>[...e[68]||(e[68]=[n(" 包含所有国家 ",-1)])]),_:1},8,["checked"]),a(be,{checked:te.value,"onUpdate:checked":e[23]||(e[23]=s=>te.value=s),class:"option-checkbox"},{default:l(()=>[...e[69]||(e[69]=[n(" 包含所有协议 ",-1)])]),_:1},8,["checked"])])])]),_:1},8,["open","title","confirmLoading"])],64)}}}),ca=at(ta,[["__scopeId","data-v-7daa5548"]]);export{ca as default};
